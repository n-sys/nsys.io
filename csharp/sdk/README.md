# The csharp client SDK for the nsys.io gRPC API.

## Nsys.Api
To use the SDK simply include the Nsys.Api project as a reference in your own project file. The following is a snipit from the example found at `../examples/echoDemo/echoDemo.csproj`:

```
<ItemGroup>
  <ProjectReference Include="../../sdk/Nsys.Api/Nsys.Api.csproj" />
</ItemGroup>
```

In your program, create a gRPC `Channel` pointing to our host using TLS. Using the channel, create a client for the gRPC service you want to use.  When making requests it is important to put your api key in the header of the request.
The following is a snipit from the example found at `../examples/echoDemo/Program.cs`.

```
// first we create a grpc channel connected to our host over tls
var creds = new SslCredentials();
var channelOptions = new List<ChannelOption>
{
    new ChannelOption(ChannelOptions.SslTargetNameOverride, "api.nsys.io")
};
var channel = new Channel(host, port, creds, channelOptions);

// create the nsys Diagnostic service client
var client = new Diagnostic.DiagnosticClient(channel);

// get the request ready
var request = new EchoRequest { Text = "Hello nsys! from C#" };

// you must add the api key to the request headers
var requestHeaders = new Metadata {{ "x-api-key", apiKey }};

// make the request and get the reply
var reply = client.Echo(request, requestHeaders);

// do something to the reply
Console.WriteLine("reply: " + reply);
```

## Code generation

The Nsys.Api class library is fully autogenerated code created by the build/build.csproj project.  When the nsys.io api is updated, you can regenerate the source in Nsys.Api by rebuilding the build project.
